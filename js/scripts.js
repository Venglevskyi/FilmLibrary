"use strict";var popularityRefs={filmsList:document.querySelector(".films-list"),btnPrev:document.querySelector(".pagination__btn--prev"),pagPage:document.querySelector(".pagination__page"),btnNext:document.querySelector(".pagination__btn--next"),homePageBtn:document.querySelector(".home-btn")},popularityFilms="https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=bd2cd46f09d0c01b4fe8699d010953c1&language=ru",popularFilmsData={page:1,copyDomElement:"",flag:!1,getDataPopularFilms:function(){fetch("".concat(popularityFilms,"&page=").concat(this.page)).then(function(t){return t.json()}).then(function(t){return parseData(t.results)}).catch(function(t){return console.error(t)})}};document.addEventListener("DOMContentLoaded",popularFilmsData.getDataPopularFilms()),popularityRefs.homePageBtn.addEventListener("click",function(){return location.reload()}),popularityRefs.btnPrev.addEventListener("click",prevPage),popularityRefs.btnNext.addEventListener("click",nextPage);var serchUrl="https://api.themoviedb.org/3/search/movie?api_key=bd2cd46f09d0c01b4fe8699d010953c1&language=ru&query=",serchRefs={input:document.querySelector(".searchform__field__input"),output:document.querySelector(".films-list")},findSettings={page:1,serchQuery:"",searchFromDB:function(t){fetch("".concat(serchUrl).concat(t,"&page=").concat(this.page)).then(function(t){return t.json()}).then(function(t){return parseData(t.results)}).catch(function(t){return console.error(t)})}};function getInputValue(t){t.preventDefault();var e=t.srcElement.value;findSettings.serchQuery=e,0!==findSettings.serchQuery.length?findSettings.searchFromDB(e):popularFilmsData.getDataPopularFilms()}function renderFilmSerchList(t){serchRefs.output.insertAdjacentHTML("afterbegin",t)}serchRefs.input.addEventListener("input",getInputValue);var pageRefs={pagPage:document.querySelector(".pagination__page span")};function prevPage(){popularFilmsData.flag&&(clearList(),popularFilmsData.flag=!1,popularityRefs.pagPage.classList.remove("hidden"),popularityRefs.btnNext.classList.remove("hidden"),popularityRefs.filmsList.appendChild(popularFilmsData.copyDomElement)),1<findSettings.page&&(findSettings.page-=1,pageRefs.pagPage.textContent=findSettings.page,findSettings.searchFromDB(findSettings.serchQuery)),1<popularFilmsData.page&&(popularFilmsData.page-=1,pageRefs.pagPage.textContent=popularFilmsData.page,popularFilmsData.getDataPopularFilms(),window.scrollTo({top:0,left:0,behavior:"auto"}))}function nextPage(){1<=findSettings.serchQuery.length?(findSettings.page+=1,pageRefs.pagPage.textContent=findSettings.page,findSettings.searchFromDB(findSettings.serchQuery)):(popularFilmsData.page+=1,pageRefs.pagPage.textContent=popularFilmsData.page,popularFilmsData.getDataPopularFilms(),window.scrollTo({top:0,left:0,behavior:"auto"}))}var refsFilmData={userInput:document.querySelector(".films-list"),body:document.querySelector("body")};function getUserInput(t){t.target!==t.currentTarget&&getData(t.target.id)}refsFilmData.userInput.addEventListener("click",getUserInput);var baseUrl="https://api.themoviedb.org/3/movie/",apiKey="?api_key=bd2cd46f09d0c01b4fe8699d010953c1&language=ru",imgFilmUrl="https://image.tmdb.org/t/p/w200";function getData(t){fetch("".concat(baseUrl).concat(t).concat(apiKey)).then(function(t){return t.json()}).then(function(t){return parseFilmData(t)}).catch(function(t){return console.error(t)})}function parseFilmData(t){var e='<section class="detailsPage">\n    <div class="detailsPage__container">\n    <figure>\n    <img class="poster" src="'.concat(imgFilmUrl).concat(t.poster_path,'" alt="film-poster" />\n    </figure>\n    <div class="film-info__container">\n    <h2 class="title film-title">').concat(t.title,"</h2>\n    <table>\n    <tr>\n    <td>vote / votes</td>\n    <td>").concat(t.vote_average," / ").concat(t.vote_count,"</td>\n    </tr>\n    <tr>\n    <td>original title</td>\n    <td>").concat(t.original_title,"</td>\n    </tr>\n    <tr>\n    <td>popularity</td>\n    <td>").concat(t.popularity,"</td>\n    </tr>\n    <tr>\n    <td>genre</td>\n    <td>").concat(t.genres[0].name,'</td>\n    </tr>\n    </table>\n    <h2 class="title">About</h2>\n    <p class="text">\n    ').concat(t.overview,"\n    </p>\n    </div>\n    </div>\n    </section>").toString();popularFilmsData.flag=!0,renderList(e)}var refs={filmsList:document.querySelector(".films-list")};function clearList(){refs.filmsList.innerHTML=""}var imgUrl="https://image.tmdb.org/t/p/w200";function parseData(t){renderList(t.map(function(t){return'<li " class="films-list__item">\n        <a id="'.concat(t.id,'" class="films-list__item__block" href="#">\n          <img\n          class="films-list__image"\n            src="').concat(imgUrl).concat(t.poster_path?t.poster_path:t.backdrop_path,'"\n            alt="Here\'s how it looks!"\n            width="298"\n            height="156"\n          />\n          <p class="films-list__item__block__filmname">').concat(t.title,"</p>\n        </a>\n      </li>")}).join(""))}function renderList(t){popularFilmsData.copyDomElement=popularityRefs.filmsList.cloneNode(!0),clearList(),popularityRefs.filmsList.insertAdjacentHTML("afterbegin",t),popularFilmsData.flag&&(popularityRefs.pagPage.classList.add("hidden"),popularityRefs.btnNext.classList.add("hidden"))}